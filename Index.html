<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RPG BattleRoyale (Single File)</title>
  <style>
    :root{--bg:#0f1724;--panel:#0b1220;--accent:#7c3aed;--muted:#9aa4b2;--good:#10b981;--bad:#ef4444}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#dbe7f3;background:linear-gradient(180deg,var(--bg),#071126)}
    .app{display:grid;grid-template-columns:350px 1fr 320px;gap:16px;padding:18px;height:100%}
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.04)}
    header{grid-column:1/-1;display:flex;justify-content:space-between;align-items:center;padding:12px 18px;margin-bottom:6px}
    h1{font-size:18px;margin:0}
    .small{font-size:12px;color:var(--muted)}
    .center{display:flex;align-items:center;gap:8px}
    #log{height:280px;overflow:auto;background:rgba(0,0,0,0.15);padding:8px;border-radius:8px;font-family:monospace;font-size:13px}
    button{background:var(--accent);color:white;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
    .muted-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .row{display:flex;gap:8px;align-items:center}
    .stat{display:flex;justify-content:space-between;padding:6px 8px;background:rgba(255,255,255,0.02);border-radius:8px;margin-bottom:6px}
    .inventory{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .item{background:rgba(255,255,255,0.02);padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);font-size:13px}
    .shop-list{max-height:420px;overflow:auto}
    .big{font-size:16px}
    .right-panel{display:flex;flex-direction:column;gap:10px}
    .arena{background:linear-gradient(180deg,#062034,#031022);border-radius:10px;padding:12px;min-height:420px;color:#cfe7ff}
    .player-row{display:flex;justify-content:space-between;padding:6px;border-radius:6px;background:rgba(255,255,255,0.02);margin-bottom:6px}
    .hpbar{height:10px;background:rgba(255,255,255,0.06);border-radius:6px;overflow:hidden}
    .hpfill{height:100%;background:linear-gradient(90deg,var(--good),#3b82f6)}
    input,select{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:var(--muted)}
    footer{grid-column:1/-1;padding:8px 18px;color:var(--muted);font-size:13px}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .flexcol{display:flex;flex-direction:column}
    .badge{padding:4px 8px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:12px}
    .hidden{display:none}
    .centered{display:flex;align-items:center;justify-content:center}
  </style>
</head>
<body>
  <div style="display:flex;align-items:center;justify-content:center;padding:12px 18px">
    <div style="max-width:1100px;width:100%" class="app">
      <div class="panel">
        <div class="row" style="justify-content:space-between;align-items:flex-start">
          <div>
            <h1>RPG BattleRoyale</h1>
            <div class="small">í„´ì œ RPG ìŠ¤íƒ€ì¼ ë°°í‹€ë¡œì–„ â€” ìƒì , ì €ì¥, íŒë§¤, ì¸ë²¤í† ë¦¬ í¬í•¨</div>
          </div>
          <div class="flexcol">
            <div class="small">ê³¨ë“œ: <span id="gold">0</span></div>
            <div class="small">ë¼ìš´ë“œ: <span id="round">0</span></div>
          </div>
        </div>
        <hr style="opacity:.06;margin:10px 0">
        <div id="log" aria-live="polite"></div>
        <div style="margin-top:10px;display:flex;gap:8px;justify-content:space-between;align-items:center">
          <div class="controls">
            <button id="startBtn">ê²Œì„ ì‹œì‘</button>
            <button id="nextRoundBtn" class="muted-btn">ë‹¤ìŒ ë¼ìš´ë“œ</button>
            <button id="autoplayBtn" class="muted-btn">ìë™ í”Œë ˆì´: OFF</button>
          </div>
          <div class="row">
            <button id="saveBtn" class="muted-btn">ì €ì¥</button>
            <button id="loadBtn" class="muted-btn">ë¶ˆëŸ¬ì˜¤ê¸°</button>
            <button id="exportBtn" class="muted-btn">ë‚´ë³´ë‚´ê¸°</button>
            <input id="importFile" class="hidden" type="file" accept="application/json">
          </div>
        </div>
      </div>

      <div class="panel" style="display:flex;flex-direction:column">
        <div class="small">í”Œë ˆì´ì–´</div>
        <div class="stat">
          <div>
            <div id="playerName" class="big">ìš©ì‚¬</div>
            <div class="small">ë ˆë²¨: <span id="playerLevel">1</span> Â· ê²½í—˜ì¹˜: <span id="playerExp">0</span>/<span id="playerExpToNext">100</span></div>
          </div>
          <div style="width:120px">
            <div class="small">HP</div>
            <div class="hpbar"><div id="playerHpFill" class="hpfill" style="width:100%"></div></div>
            <div style="font-size:12px;text-align:right" id="playerHpText">100/100</div>
          </div>
        </div>

        <div class="small">ìŠ¤íƒ¯</div>
        <div class="stat"><div>ê³µê²©</div><div id="statAtk">10</div></div>
        <div class="stat"><div>ë°©ì–´</div><div id="statDef">5</div></div>
        <div class="stat"><div>ì†ë„</div><div id="statSpd">5</div></div>
        <hr style="opacity:.06;margin:10px 0">

        <div class="small">ì¸ë²¤í† ë¦¬ <span class="small" id="invCount">(0)</span></div>
        <div class="inventory" id="inventory"></div>

        <div style="margin-top:8px;display:flex;gap:8px">
          <button id="useItemBtn" class="muted-btn">ì‚¬ìš©</button>
          <button id="sellItemBtn" class="muted-btn">íŒë§¤</button>
          <button id="dropItemBtn" class="muted-btn">ë²„ë¦¬ê¸°</button>
        </div>
      </div>

      <div class="panel right-panel">
        <div class="small">ìƒì </div>
        <div class="shop-list" id="shopList"></div>
        <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
          <button id="buyBtn">êµ¬ë§¤</button>
          <select id="qtySelect"><option value="1">x1</option><option value="5">x5</option><option value="10">x10</option></select>
        </div>

        <hr style="opacity:.06;margin:6px 0">
        <div class="small">ì•„ë ˆë‚˜</div>
        <div class="arena" id="arena">
          <div id="arenaPlayers"></div>
        </div>

        <div style="margin-top:8px;display:flex;gap:8px;justify-content:space-between;align-items:center">
          <div class="small">ìë™ ë‚œìˆ˜ ì‹œë“œ</div>
          <input id="seedInput" placeholder="ì˜µì…˜: ìˆ«ì ì…ë ¥" />
        </div>

      </div>

      <footer class="panel small centered">í‚¤: ì‹œì‘(Start) Â· ë‹¤ìŒ ë¼ìš´ë“œ(Next) Â· ìë™(Autoplay). ì´ íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì— ì—´ì–´ í”Œë ˆì´í•˜ì„¸ìš”.</footer>
    </div>
  </div>

<script>
/* ----------------------------
   ë‹¨ì¼ íŒŒì¼ RPG BattleRoyale
   ê¸°ëŠ¥:
   - 8ëª… ë°°í‹€ë¡œì–„(ìœ ì € + AI)
   - ë¼ìš´ë“œë³„ ì „íˆ¬ ì‹œë®¬ë ˆì´ì…˜
   - ìƒì (êµ¬ë§¤/íŒë§¤)
   - ì¸ë²¤í† ë¦¬(ì‚¬ìš©/íŒë§¤/ë²„ë¦¬ê¸°)
   - ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°(ë¡œì»¬ìŠ¤í† ë¦¬ì§€ + ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°)
   - ìë™ í”Œë ˆì´ ëª¨ë“œ
   ----------------------------*/

// ìœ í‹¸
const $ = id => document.getElementById(id);
const rand = (min, max) => Math.floor(Math.random()*(max-min+1))+min;
const clamp = (v,a,b) => Math.max(a,Math.min(b,v));

// ê²Œì„ ìƒíƒœ
let state = {
  gold: 50,
  round: 0,
  player: null,
  players: [],
  shop: [],
  inventory: [],
  autoplay: false,
  seed: null
};

// ì•„ì´í…œ ì •ì˜
const ITEM_DEFS = [
  {id:'potion_small',name:'ì†Œí˜• í¬ì…˜',type:'consumable',desc:'HP 30 íšŒë³µ',value:20,effect: (u)=>{u.hp = Math.min(u.maxHp, u.hp+30)}},
  {id:'potion_big',name:'ëŒ€í˜• í¬ì…˜',type:'consumable',desc:'HP 80 íšŒë³µ',value:60,effect: (u)=>{u.hp = Math.min(u.maxHp, u.hp+80)}},
  {id:'sword_iron',name:'ì² ê²€',type:'equip',desc:'+6 ê³µê²©',value:80,equip:{atk:6}},
  {id:'shield_small',name:'ì‘ì€ ë°©íŒ¨',type:'equip',desc:'+4 ë°©ì–´',value:60,equip:{def:4}},
  {id:'boots',name:'ê²½ëŸ‰ ë¶€ì¸ ',type:'equip',desc:'+3 ì†ë„',value:50,equip:{spd:3}},
  {id:'coin_bag',name:'ëˆì£¼ë¨¸ë‹ˆ',type:'consumable',desc:'ì¦‰ì‹œ ê³¨ë“œ +30',value:30,effect:(u)=>{state.gold+=30}}
];

function makeShop(){
  const shop = [];
  for(let i=0;i<6;i++) shop.push(structClone(ITEM_DEFS[rand(0,ITEM_DEFS.length-1)]));
  state.shop = shop;
}

// í”Œë ˆì´ì–´/AI ìƒì„±
function makePlayer(name, isUser=false){
  const base = {name, isUser, level:1, exp:0, maxHp:100, hp:100, atk:10, def:5, spd:5, alive:true, id: uniqueId(), equip:{}, inventory:[]};
  return base;
}

function uniqueId(){return 'id_'+Math.random().toString(36).slice(2,9)}
function structClone(obj){return JSON.parse(JSON.stringify(obj))}

// ì´ˆê¸°í™”
function resetGame(){
  state.gold = 50; state.round=0; state.inventory = [];
  state.player = makePlayer('ìš©ì‚¬', true);
  state.players = [state.player];
  for(let i=1;i<8;i++) state.players.push(makePlayer('ì _' + i));
  makeShop();
  log('ê²Œì„ì´ ì´ˆê¸°í™” ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë°°í‹€ë¡œì–„ì„ ì‹œì‘í•˜ì„¸ìš”.');
  renderAll();
}

// ë Œë”
function renderAll(){
  $('gold').textContent = state.gold;
  $('round').textContent = state.round;
  renderPlayerPanel();
  renderInventory();
  renderShop();
  renderArena();
}

function renderPlayerPanel(){
  const p = state.player;
  $('playerName').textContent = p.name;
  $('playerLevel').textContent = p.level;
  $('playerExp').textContent = p.exp;
  $('playerExpToNext').textContent = p.level * 100;
  const hpPerc = Math.floor(p.hp / p.maxHp * 100);
  $('playerHpFill').style.width = hpPerc + '%';
  $('playerHpText').textContent = `${p.hp}/${p.maxHp}`;
  $('statAtk').textContent = p.atk + (p.equip.atk? ' (+'+p.equip.atk+')' : '');
  $('statDef').textContent = p.def + (p.equip.def? ' (+'+p.equip.def+')' : '');
  $('statSpd').textContent = p.spd + (p.equip.spd? ' (+'+p.equip.spd+')' : '');
}

function renderInventory(){
  const inv = $('inventory'); inv.innerHTML='';
  state.inventory.forEach((it, idx)=>{
    const el = document.createElement('div'); el.className='item'; el.dataset.idx=idx;
    el.innerHTML = `<div style="font-weight:600">${it.name}</div><div class="small">${it.desc}</div><div class="small">ê°€ì¹˜: ${it.value}G</div>`;
    el.addEventListener('click', ()=>{selectInventory(idx)});
    inv.appendChild(el);
  });
  $('invCount').textContent = `(${state.inventory.length})`;
}

let selectedInv = null;
function selectInventory(idx){
  selectedInv = idx; const nodes = document.querySelectorAll('#inventory .item'); nodes.forEach(n=>n.style.outline=''); nodes[idx].style.outline='2px solid rgba(124,58,237,0.6)';
}

function renderShop(){
  const list = $('shopList'); list.innerHTML='';
  state.shop.forEach((it,idx)=>{
    const el = document.createElement('div'); el.className='item'; el.dataset.idx=idx;
    el.innerHTML = `<div style="font-weight:600">${it.name} <span class="badge">${it.type}</span></div><div class="small">${it.desc}</div><div class="small">ê°€ê²©: ${it.value}G</div>`;
    el.addEventListener('click', ()=>{selectShop(idx)});
    list.appendChild(el);
  });
}
let selectedShop = null;
function selectShop(idx){ selectedShop = idx; document.querySelectorAll('#shopList .item').forEach(n=>n.style.outline=''); document.querySelectorAll('#shopList .item')[idx].style.outline='2px solid rgba(124,58,237,0.6)'; }

function renderArena(){
  const a = $('arenaPlayers'); a.innerHTML='';
  state.players.forEach(p=>{
    const el = document.createElement('div'); el.className='player-row';
    el.innerHTML = `<div>${p.name}${p.isUser? ' (YOU)':''} ${!p.alive?'<span class="small">(ì‚¬ë§)</span>':''}</div><div style="min-width:160px"><div class="hpbar"><div class="hpfill" style="width:${Math.max(0,Math.floor(p.hp/p.maxHp*100))}%"></div></div><div style="text-align:right;font-size:12px">HP:${p.hp}/${p.maxHp}</div></div>`;
    a.appendChild(el);
  });
}

// ì „íˆ¬ ì‹œë®¬ë ˆì´ì…˜(ë¼ìš´ë“œ ì§„í–‰)
function runRound(){
  if(state.players.filter(p=>p.alive).length <= 1){ log('ì´ë¯¸ ìŠ¹ë¶€ê°€ ê²°ì •ëœ ìƒíƒœì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê²Œì„ì„ ì‹œì‘í•˜ê±°ë‚˜ ì¬ì„¤ì •í•˜ì„¸ìš”.'); return; }
  state.round++;
  $('round').textContent = state.round;
  log(`=== ë¼ìš´ë“œ ${state.round} ì‹œì‘ ===`);

  // í–‰ë™ ìˆœì„œ: ì†ë„ ìˆœ
  const actors = state.players.filter(p=>p.alive).sort((a,b)=> (b.spd + (b.equip.spd||0)) - (a.spd + (a.equip.spd||0)) );
  actors.forEach(actor=>{
    if(!actor.alive) return;
    // íƒ€ê¹ƒ ì„ íƒ: ê°€ì¥ HP ë†’ì€(ì ) í˜¹ì€ ëœë¤
    const targets = state.players.filter(p=>p.alive && p !== actor);
    if(targets.length===0) return;
    const tgt = targets[rand(0,targets.length-1)];
    // ë°ë¯¸ì§€ ê³„ì‚°
    const atk = actor.atk + (actor.equip.atk||0) + rand(-2,2);
    const def = tgt.def + (tgt.equip.def||0);
    const dmg = Math.max(1, atk - Math.floor(def/2) + rand(-1,2));
    tgt.hp -= dmg;
    log(`${actor.name}ì´(ê°€) ${tgt.name}ì—ê²Œ ${dmg} ë°ë¯¸ì§€! (${Math.max(0,tgt.hp)}/${tgt.maxHp})`);
    if(tgt.hp <= 0){ tgt.alive = false; tgt.hp = 0; log(`ğŸ’€ ${tgt.name} ì´(ê°€) ì „íˆ¬ë¶ˆëŠ¥!`); }
  });

  // ì „ë¦¬í’ˆ: ë¼ìš´ë“œ ì¢…ë£Œ í›„ ì£½ì€ ì ì˜ ì•„ì´í…œ íšë“ í™•ë¥ 
  const dead = state.players.filter(p=>!p.alive);
  dead.forEach(d=>{
    if(d.isLooted) return; d.isLooted=true;
    // ì‘ê²Œ ê³¨ë“œ ì£¼ê¸°
    const gained = rand(5,25);
    state.gold += gained; log(`${d.name}ì˜ ì”í•´ì—ì„œ ${gained}G íšë“`);
    // ê°€ë” ì•„ì´í…œ ë“œë¡­
    if(Math.random() < 0.3){ const it = structClone(ITEM_DEFS[rand(0,ITEM_DEFS.length-1)]); state.inventory.push(it); log(`${d.name}ì˜ ì¥ë¹„ë¥¼ íšë“: ${it.name}`); }
  });

  // ê²½í—˜ì¹˜ & ë ˆë²¨ì—… for ì‚´ì•„ìˆëŠ” í”Œë ˆì´ì–´ë“¤
  state.players.forEach(p=>{
    if(!p.alive) return;
    const gain = rand(8,20);
    p.exp += gain;
    if(p.exp >= p.level * 100){ p.exp -= p.level*100; p.level++; p.maxHp += 12; p.atk += 3; p.def +=2; p.spd +=1; p.hp = p.maxHp; log(`${p.name} ë ˆë²¨ì—…! ë ˆë²¨ ${p.level}`); }
  });

  // ìŠ¹ë¦¬ ì¡°ê±´ í™•ì¸
  const alive = state.players.filter(p=>p.alive);
  if(alive.length === 1){ log(`ğŸ† ìµœì¢… ìŠ¹ì: ${alive[0].name}`); state.autoplay=false; $('autoplayBtn').textContent='ìë™ í”Œë ˆì´: OFF'; }
  renderAll();
  autosave();
}

// ìƒì  ê´€ë ¨
function buySelected(){
  if(selectedShop==null){ alert('ìƒì ì—ì„œ ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”.'); return; }
  const qty = Number($('qtySelect').value);
  const item = structClone(state.shop[selectedShop]);
  const total = item.value * qty;
  if(state.gold < total){ alert('ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.'); return; }
  state.gold -= total;
  for(let i=0;i<qty;i++) state.inventory.push(structClone(item));
  log(`${item.name} x${qty} êµ¬ë§¤ (${total}G)`);
  renderAll();
}

function sellSelectedItem(){
  if(selectedInv==null){ alert('íŒë§¤í•  ì•„ì´í…œì„ ì¸ë²¤í† ë¦¬ì—ì„œ ì„ íƒí•˜ì„¸ìš”.'); return; }
  const it = state.inventory[selectedInv];
  const gain = Math.floor(it.value * 0.6);
  state.gold += gain;
  state.inventory.splice(selectedInv,1);
  selectedInv = null;
  log(`${it.name} íŒë§¤: ${gain}G íšë“`);
  renderAll();
}

function useSelectedItem(){
  if(selectedInv==null){ alert('ì‚¬ìš©í•  ì•„ì´í…œì„ ì¸ë²¤í† ë¦¬ì—ì„œ ì„ íƒí•˜ì„¸ìš”.'); return; }
  const it = state.inventory[selectedInv];
  if(it.type === 'consumable'){
    if(it.effect) it.effect(state.player);
    log(`${it.name} ì‚¬ìš©.`);
    state.inventory.splice(selectedInv,1);
    selectedInv=null; renderAll();
  } else if(it.type === 'equip'){
    // ì¥ì°©: ì¥ë¹„ëŠ” ë‹¨ì¼ ìŠ¬ë¡¯ í•©ì‚°
    state.player.equip = {...state.player.equip, ...it.equip};
    log(`${it.name} ì¥ì°©. ìŠ¤íƒ¯ì´ ì¦ê°€í•©ë‹ˆë‹¤.`);
    state.inventory.splice(selectedInv,1);
    selectedInv=null; renderAll();
  }
}

// ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
function saveToLocal(){
  const save = structClone({gold:state.gold, round:state.round, player:state.player, players:state.players, inventory:state.inventory, shop:state.shop});
  localStorage.setItem('rbr_save', JSON.stringify(save));
  log('ê²Œì„ì„ ë¡œì»¬ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.');
}
function loadFromLocal(){
  const raw = localStorage.getItem('rbr_save');
  if(!raw){ alert('ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.'); return; }
  const s = JSON.parse(raw);
  state.gold = s.gold; state.round = s.round; state.player = s.player; state.players = s.players; state.inventory = s.inventory; state.shop = s.shop;
  log('ë¡œì»¬ì—ì„œ ì €ì¥ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.'); renderAll();
}
function exportSave(){
  const save = structClone({gold:state.gold, round:state.round, player:state.player, players:state.players, inventory:state.inventory, shop:state.shop});
  const data = JSON.stringify(save, null, 2);
  const blob = new Blob([data], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href=url; a.download='rbr_save.json'; a.click(); URL.revokeObjectURL(url);
}
function importSave(file){
  const reader = new FileReader();
  reader.onload = e=>{ try{ const s = JSON.parse(e.target.result); state.gold = s.gold; state.round = s.round; state.player = s.player; state.players = s.players; state.inventory = s.inventory; state.shop = s.shop; log('íŒŒì¼ì—ì„œ ì €ì¥ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.'); renderAll(); }catch(err){alert('ì˜ëª»ëœ íŒŒì¼ì…ë‹ˆë‹¤.')} }
  reader.readAsText(file);
}

// ìë™ í”Œë ˆì´
let autoplayInterval = null;
function toggleAutoplay(){ state.autoplay = !state.autoplay; $('autoplayBtn').textContent = `ìë™ í”Œë ˆì´: ${state.autoplay? 'ON':'OFF'}`; if(state.autoplay){ autoplayInterval = setInterval(()=>{ if(state.players.filter(p=>p.alive).length>1) runRound(); else clearInterval(autoplayInterval); }, 900); } else { clearInterval(autoplayInterval); } }

// ë¡œê·¸
function log(txt){ const el = $('log'); const time = new Date().toLocaleTimeString(); el.innerHTML += `[${time}] ${txt}<br>`; el.scrollTop = el.scrollHeight; }

function autosave(){ try{ saveToLocal(); }catch(e){} }

// ì´ë²¤íŠ¸ ë°”ì¸ë”©
window.onload = ()=>{
  resetGame();
  $('startBtn').addEventListener('click', ()=>{ resetGame(); state.players.forEach(p=>{p.hp=p.maxHp;p.alive=true;p.isLooted=false}); runRound(); });
  $('nextRoundBtn').addEventListener('click', ()=> runRound());
  $('buyBtn').addEventListener('click', buySelected);
  $('sellItemBtn').addEventListener('click', sellSelectedItem);
  $('useItemBtn').addEventListener('click', useSelectedItem);
  $('dropItemBtn').addEventListener('click', ()=>{ if(selectedInv==null){alert('ë²„ë¦´ ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”.');return;} const it=state.inventory.splice(selectedInv,1)[0]; selectedInv=null; log(`${it.name} ì„(ë¥¼) ë²„ë ¸ìŠµë‹ˆë‹¤.`); renderAll(); });
  $('saveBtn').addEventListener('click', saveToLocal);
  $('loadBtn').addEventListener('click', loadFromLocal);
  $('exportBtn').addEventListener('click', exportSave);
  $('importFile').addEventListener('change', e=>{ if(e.target.files.length) importSave(e.target.files[0]); });
  $('autoplayBtn').addEventListener('click', toggleAutoplay);
  $('seedInput').addEventListener('change', (e)=>{ state.seed = e.target.value ? Number(e.target.value): null; log('ì‹œë“œê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤: '+state.seed); });

  // ê°„ë‹¨í•œ í‚¤ ë°”ì¸ë”©
  window.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase()==='s'){ saveToLocal(); }
    if(e.key.toLowerCase()==='n'){ runRound(); }
    if(e.key.toLowerCase()==='a'){ toggleAutoplay(); }
  });
}

// ì´ˆë°˜ ìƒ˜í”Œ ì•„ì´í…œ ëª‡ê°œ ì§€ê¸‰
state.inventory.push(structClone(ITEM_DEFS[0])); state.inventory.push(structClone(ITEM_DEFS[2]));

</script>
</body>
</html>
